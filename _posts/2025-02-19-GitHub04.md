---
title: "GitHub Actionsë¡œ CD (Continuous Deployment) ì„¤ì •í•˜ê¸°"
author: mminzy22
date: 2025-02-19 21:00:00 +0900
categories: [GitHub]
tags: [Bootcamp, GitHub, GitHub Actions, CI/CD, CD, YAML, TIL]
description: "GitHub Actionsë¥¼ ì‚¬ìš©í•˜ì—¬ CD(Continuous Deployment) íŒŒì´í”„ë¼ì¸ì„ êµ¬ì¶•í•˜ëŠ” ë°©ë²•ì„ ìƒì„¸íˆ ì„¤ëª…"
pin: false
math: true
---


ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œì—ì„œ **ì§€ì†ì  ë°°í¬(Continuous Deployment, CD)** ëŠ” ê²€ì¦ëœ ì½”ë“œë¥¼ ìë™ìœ¼ë¡œ ì„œë²„ë‚˜ í´ë¼ìš°ë“œ í™˜ê²½ì— ë°°í¬í•˜ëŠ” ê³¼ì •ì…ë‹ˆë‹¤. GitHub Actionsë¥¼ í™œìš©í•˜ë©´ ì½”ë“œ ë³€ê²½ ì‚¬í•­ì´ ë°˜ì˜ë  ë•Œë§ˆë‹¤ ë°°í¬ë¥¼ ìë™í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.


## 1. CD(Continuous Deployment)ë€?

### **CD(ì§€ì†ì  ë°°í¬) ê°œë…**
CDëŠ” CI(Continuous Integration)ë¥¼ ê±°ì¹œ ì½”ë“œê°€ **ìë™ìœ¼ë¡œ í”„ë¡œë•ì…˜ í™˜ê²½ì— ë°°í¬**ë˜ëŠ” í”„ë¡œì„¸ìŠ¤ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. CI/CDë¥¼ í•¨ê»˜ ì‚¬ìš©í•˜ë©´ ê°œë°œë¶€í„° ë°°í¬ê¹Œì§€ì˜ ì „ì²´ ê³¼ì •ì„ ìë™í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**CDì˜ ì£¼ìš” ëª©í‘œ**
- **ë¹ ë¥´ê³  ì•ˆì •ì ì¸ ë°°í¬**
- **ìë™í™”ëœ í”„ë¡œì„¸ìŠ¤ë¥¼ í†µí•œ ë°°í¬ ì˜¤ë¥˜ ìµœì†Œí™”**
- **ì§€ì†ì ì¸ ì—…ë°ì´íŠ¸ ì œê³µìœ¼ë¡œ ì‚¬ìš©ì ê²½í—˜ í–¥ìƒ**

**CDì™€ GitHub Actions**
GitHub Actionsë¥¼ ì‚¬ìš©í•˜ë©´ ì½”ë“œê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ **ìë™ìœ¼ë¡œ ë¹Œë“œ, í…ŒìŠ¤íŠ¸ ë° ë°°í¬**ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.


## 2. GitHub Actionsë¡œ CD ì„¤ì •í•˜ê¸°

### **.github/workflows/ í´ë” ìƒì„±**
GitHub Actionsì—ì„œ CDë¥¼ ì‹¤í–‰í•˜ë ¤ë©´ `.github/workflows/` í´ë” ë‚´ì— YAML íŒŒì¼ì„ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤.

ğŸ“ **í”„ë¡œì íŠ¸ êµ¬ì¡° ì˜ˆì‹œ**

```bash
ğŸ“‚ my-project/
â”œâ”€â”€ ğŸ“‚ .github/
â”‚   â””â”€â”€ ğŸ“‚ workflows/
â”‚       â””â”€â”€ cd.yml  # CD ì›Œí¬í”Œë¡œìš° íŒŒì¼
â”œâ”€â”€ ğŸ“‚ src/
â””â”€â”€ ğŸ“„ README.md
```


## 3. CD Workflow ì‘ì„±í•˜ê¸°

### **ê¸°ë³¸ CD Workflow ì˜ˆì œ (`cd.yml`)**
ì•„ë˜ëŠ” GitHub Actionsë¥¼ ì‚¬ìš©í•˜ì—¬ CDë¥¼ ì„¤ì •í•˜ëŠ” ê¸°ë³¸ì ì¸ Workflow ì˜ˆì œì…ë‹ˆë‹¤.

```yaml
name: CD Workflow  # ì›Œí¬í”Œë¡œìš° ì´ë¦„

on:
  push:
    branches:
      - main  # main ë¸Œëœì¹˜ì— ì½”ë“œê°€ í‘¸ì‹œë  ë•Œ ì‹¤í–‰

jobs:
  deploy:
    runs-on: ubuntu-latest  # ì‹¤í–‰ í™˜ê²½ ì§€ì •
    steps:
      - name: Checkout Repository  # ì½”ë“œ ê°€ì ¸ì˜¤ê¸°
        uses: actions/checkout@v4
      
      - name: Set up Node.js  # Node.js í™˜ê²½ ì„¤ì •
        uses: actions/setup-node@v4
        with:
          node-version: '16'
      
      - name: Install dependencies  # íŒ¨í‚¤ì§€ ì„¤ì¹˜
        run: npm install
      
      - name: Build project  # í”„ë¡œì íŠ¸ ë¹Œë“œ
        run: npm run build
      
      - name: Deploy to Server  # ì„œë²„ì— ë°°í¬
        env:
          SSH_PRIVATE_KEY: ${{ secrets.SSH_PRIVATE_KEY }}
        run: |
          echo "$SSH_PRIVATE_KEY" > private_key && chmod 600 private_key
          scp -i private_key -r ./dist user@server:/var/www/project
          ssh -i private_key user@server "systemctl restart nginx"
```

**ì´ Workflowì˜ ë™ì‘ ë°©ì‹**
1. `main` ë¸Œëœì¹˜ì— **ì½”ë“œê°€ í‘¸ì‹œë  ë•Œ ì‹¤í–‰**
2. **Ubuntu í™˜ê²½ì—ì„œ ì‹¤í–‰**
3. **ì €ì¥ì†Œì˜ ì½”ë“œë¥¼ ê°€ì ¸ì˜´ (Checkout)**
4. **Node.js í™˜ê²½ì„ ì„¤ì •í•˜ê³ , íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜**
5. **í”„ë¡œì íŠ¸ë¥¼ ë¹Œë“œí•˜ê³ , ì„œë²„ì— ì—…ë¡œë“œ**
6. **ì„œë²„ì—ì„œ Nginxë¥¼ ì¬ì‹œì‘í•˜ì—¬ ë°˜ì˜**


## 4. CD Workflow ìƒì„¸ ì„¤ëª…

### **Workflow íŠ¸ë¦¬ê±° (`on` ì†ì„±)**
CD Workflowê°€ ì‹¤í–‰ë˜ëŠ” ì¡°ê±´ì„ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```yaml
on:
  push:
    branches:
      - main
```

- `push`: ì½”ë“œê°€ íŠ¹ì • ë¸Œëœì¹˜ì— í‘¸ì‹œë  ë•Œ ì‹¤í–‰ë¨
- `branches: [main]`: `main` ë¸Œëœì¹˜ì—ë§Œ ì ìš©ë¨

### **Jobê³¼ ì‹¤í–‰ í™˜ê²½ (`jobs` ë° `runs-on`)**

```yaml
jobs:
  deploy:
    runs-on: ubuntu-latest
```

- ë°°í¬ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” **Job**ì„ ì •ì˜
- `runs-on`ì„ ì‚¬ìš©í•˜ì—¬ ì‹¤í–‰ í™˜ê²½ì„ ì§€ì • (ì˜ˆ: `ubuntu-latest`)

### **Steps (ë‹¨ê³„ë³„ ì‹¤í–‰ ë‚´ìš©)**
#### 1) **ì €ì¥ì†Œ ì½”ë“œ ê°€ì ¸ì˜¤ê¸°**

```yaml
- name: Checkout Repository
  uses: actions/checkout@v4
```

ì €ì¥ì†Œì˜ ì½”ë“œë¥¼ ê°€ì ¸ì™€ CD í™˜ê²½ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.

#### 2) **Node.js í™˜ê²½ ì„¤ì •**

```yaml
- name: Set up Node.js
  uses: actions/setup-node@v4
  with:
    node-version: '16'
```

- Node.js 16 ë²„ì „ì„ ì„¤ì¹˜í•˜ì—¬ í”„ë¡œì íŠ¸ë¥¼ ë¹Œë“œí•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.

#### 3) **íŒ¨í‚¤ì§€ ì„¤ì¹˜ ë° ë¹Œë“œ**

```yaml
- name: Install dependencies
  run: npm install

- name: Build project
  run: npm run build
```

- í”„ë¡œì íŠ¸ì˜ ì˜ì¡´ì„±ì„ ì„¤ì¹˜í•œ í›„, ë¹Œë“œë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.

#### 4) **ì„œë²„ì— ë°°í¬**

```yaml
- name: Deploy to Server
  env:
    SSH_PRIVATE_KEY: ${{ secrets.SSH_PRIVATE_KEY }}
  run: |
    echo "$SSH_PRIVATE_KEY" > private_key && chmod 600 private_key
    scp -i private_key -r ./dist user@server:/var/www/project
    ssh -i private_key user@server "systemctl restart nginx"
```

- **GitHub Secretsë¥¼ ì‚¬ìš©í•˜ì—¬ ë³´ì•ˆ í‚¤ ê´€ë¦¬**
- `scp` ëª…ë ¹ì–´ë¡œ ë¹Œë“œëœ íŒŒì¼ì„ ì„œë²„ì— ì—…ë¡œë“œ
- `ssh` ëª…ë ¹ì–´ë¡œ ì„œë²„ì—ì„œ Nginxë¥¼ ì¬ì‹œì‘í•˜ì—¬ ë³€ê²½ ì‚¬í•­ ë°˜ì˜


## 5. GitHub Secrets ì„¤ì •
ë°°í¬ ê³¼ì •ì—ì„œ SSH í‚¤ë¥¼ ì•ˆì „í•˜ê²Œ ì €ì¥í•˜ë ¤ë©´ GitHub Secretsë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

**Secrets ì„¤ì • ë°©ë²•**
1. GitHub ì €ì¥ì†Œë¡œ ì´ë™
2. **Settings â†’ Secrets and variables â†’ Actions** í´ë¦­
3. **New repository secret** í´ë¦­
4. `Name`: `SSH_PRIVATE_KEY`, `Value`: ì„œë²„ì˜ SSH ê°œì¸ í‚¤ ì…ë ¥


## 6. ë§ˆë¬´ë¦¬

**GitHub Actionsë¡œ CD ì„¤ì •ì„ ì •ë¦¬í•˜ë©´?**
1. **CDëŠ” ê²€ì¦ëœ ì½”ë“œë¥¼ ìë™ìœ¼ë¡œ ì„œë²„ì— ë°°í¬í•˜ëŠ” ê³¼ì •**
2. **GitHub Actionsì˜ `.github/workflows/cd.yml`ì„ ì„¤ì •í•˜ì—¬ ìë™ ë°°í¬ ê°€ëŠ¥**
3. **ë°°í¬ ì‘ì—…ì—ëŠ” ì½”ë“œ ì²´í¬ì•„ì›ƒ, í™˜ê²½ ì„¤ì •, ë¹Œë“œ, ì„œë²„ ì—…ë¡œë“œ í¬í•¨**
4. **GitHub Secretsë¥¼ í™œìš©í•˜ì—¬ ë³´ì•ˆ ê°•í™” ê°€ëŠ¥**

